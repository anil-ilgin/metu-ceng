import requests
from chembl_webresource_client.new_client import new_client
import urllib.parse
import urllib.request

def drug_check_new(drugs):
    print(len(drugs))
    smiles_list = {}
    molecule = new_client.molecule
    total = len(drugs)
    ret_arr = []
    total_arr = []
    sub_lists = [drugs[x:x+10] for x in range(0, len(range(total)), 10)]
    i = 0
    for ls in sub_lists:
        print(i)
        i += 1
        total_arr = molecule.get(ls)
        print(len(total_arr))
        print(total_arr)
        if (len(total_arr) != len(ls)):
            print("Anomaly detected")
            return True, {}
        else:
            for j in range(len(total_arr)):
                smiles_list[ls[j]] = total_arr[j]['molecule_structures']['canonical_smiles']

    print(smiles_list)
    print(len(smiles_list))
    return False, smiles_list

drugs = ["CHEMBL522623","CHEMBL507827","CHEMBL454370","CHEMBL454371","CHEMBL509914","CHEMBL455174","CHEMBL510396","CHEMBL454384","CHEMBL453378","CHEMBL453379","CHEMBL510597","CHEMBL517127","CHEMBL461796","CHEMBL461797","CHEMBL460743","CHEMBL460721","CHEMBL460722","CHEMBL460723","CHEMBL460894","CHEMBL503755","CHEMBL511874","CHEMBL447850","CHEMBL446019","CHEMBL460735","CHEMBL474147","CHEMBL474342","CHEMBL474343","CHEMBL472746","CHEMBL516022","CHEMBL474141","CHEMBL516373","CHEMBL474142","CHEMBL474143","CHEMBL474341","CHEMBL447331","CHEMBL489112","CHEMBL521572","CHEMBL489117","CHEMBL489312","CHEMBL489313","CHEMBL489307","CHEMBL489308","CHEMBL489501","CHEMBL461792","CHEMBL516979","CHEMBL460736","CHEMBL461795","CHEMBL461967","CHEMBL517130","CHEMBL461968","CHEMBL473141","CHEMBL472743","CHEMBL472942","CHEMBL472943","CHEMBL514771","CHEMBL490687","CHEMBL461781","CHEMBL461782","CHEMBL495979","CHEMBL496174","CHEMBL523573","CHEMBL495733","CHEMBL495734","CHEMBL497803","CHEMBL497804","CHEMBL497184","CHEMBL500115","CHEMBL500381","CHEMBL500640","CHEMBL466586","CHEMBL512076","CHEMBL517123","CHEMBL507329","CHEMBL525805","CHEMBL501705","CHEMBL470219","CHEMBL471058","CHEMBL513418","CHEMBL469355","CHEMBL503418","CHEMBL469354","CHEMBL470011","CHEMBL511990","CHEMBL513208","CHEMBL511637","CHEMBL470218","CHEMBL513362","CHEMBL470012","CHEMBL470010","CHEMBL470003","CHEMBL470391","CHEMBL469997","CHEMBL511839","CHEMBL513716","CHEMBL511623","CHEMBL469996","CHEMBL511449","CHEMBL490987","CHEMBL520493","CHEMBL490577","CHEMBL454002","CHEMBL474267","CHEMBL488101","CHEMBL490774","CHEMBL501368","CHEMBL492199","CHEMBL483234","CHEMBL485065","CHEMBL489147","CHEMBL490775","CHEMBL485070","CHEMBL490780","CHEMBL522116","CHEMBL2372245","CHEMBL1202061","CHEMBL490768","CHEMBL504173","CHEMBL490570","CHEMBL538909","CHEMBL490569","CHEMBL483232","CHEMBL483233","CHEMBL520839","CHEMBL525725","CHEMBL497863","CHEMBL497697","CHEMBL515664","CHEMBL456758","CHEMBL514566","CHEMBL498134","CHEMBL524457","CHEMBL498133","CHEMBL497459","CHEMBL128000","CHEMBL461571","CHEMBL461311","CHEMBL472545","CHEMBL472544","CHEMBL511478","CHEMBL500591","CHEMBL461114","CHEMBL461113","CHEMBL516487","CHEMBL512391","CHEMBL1201179","CHEMBL479800","CHEMBL475594","CHEMBL475761","CHEMBL473428","CHEMBL473429","CHEMBL475768","CHEMBL475769","CHEMBL473427","CHEMBL474431","CHEMBL473436","CHEMBL473437","CHEMBL473438","CHEMBL475446","CHEMBL514938","CHEMBL519757","CHEMBL480349","CHEMBL506414","CHEMBL481324","CHEMBL475599","CHEMBL475600","CHEMBL475767","CHEMBL480348","CHEMBL481331","CHEMBL473320","CHEMBL474524","CHEMBL474324","CHEMBL474323","CHEMBL515401","CHEMBL504135","CHEMBL520515","CHEMBL496388","CHEMBL495617","CHEMBL501709","CHEMBL523059","CHEMBL527026","CHEMBL242740","CHEMBL498247","CHEMBL498249","CHEMBL498248","CHEMBL524820","CHEMBL188762","CHEMBL464721","CHEMBL485320","CHEMBL519147","CHEMBL483313","CHEMBL504416","CHEMBL484108","CHEMBL485321","CHEMBL502015","CHEMBL499344","CHEMBL461426","CHEMBL517585","CHEMBL499534","CHEMBL504034","CHEMBL461869","CHEMBL466412","CHEMBL450109","CHEMBL466614","CHEMBL466615","CHEMBL447365","CHEMBL466174","CHEMBL466175","CHEMBL450396","CHEMBL505626","CHEMBL451513","CHEMBL523122","CHEMBL508760","CHEMBL449949","CHEMBL452716","CHEMBL461811","CHEMBL505463","CHEMBL455433","CHEMBL455434","CHEMBL457250","CHEMBL501050","CHEMBL507821","CHEMBL510845","CHEMBL500072","CHEMBL503253","CHEMBL451074","CHEMBL500217","CHEMBL451347","CHEMBL452980","CHEMBL504117","CHEMBL447720","CHEMBL452768","CHEMBL453398","CHEMBL515598","CHEMBL462162","CHEMBL473553","CHEMBL455208","CHEMBL452717","CHEMBL503638","CHEMBL448628","CHEMBL443098","CHEMBL446250","CHEMBL574058","CHEMBL565714","CHEMBL565467","CHEMBL583403","CHEMBL583218","CHEMBL1645462","CHEMBL567873","CHEMBL566350","CHEMBL584714","CHEMBL566337","CHEMBL578044","CHEMBL566559","CHEMBL578255","CHEMBL567197","CHEMBL571809","CHEMBL572030","CHEMBL572031","CHEMBL570918","CHEMBL572028","CHEMBL583683","CHEMBL570709","CHEMBL605413","CHEMBL594790","CHEMBL596059","CHEMBL593770","CHEMBL593292","CHEMBL595374","CHEMBL593294","CHEMBL594661","CHEMBL604485","CHEMBL593911","CHEMBL593760","CHEMBL604893","CHEMBL592457","CHEMBL592480","CHEMBL602328","CHEMBL590875","CHEMBL592481","CHEMBL591910","CHEMBL589823","CHEMBL589822","CHEMBL592707","CHEMBL590876","CHEMBL592708","CHEMBL604671","CHEMBL590524","CHEMBL592139","CHEMBL590877","CHEMBL591051","CHEMBL590568","CHEMBL591050","CHEMBL592240","CHEMBL592141","CHEMBL589165","CHEMBL591053","CHEMBL591706","CHEMBL589068","CHEMBL601828","CHEMBL590526","CHEMBL590525","CHEMBL590714","CHEMBL592211","CHEMBL592210","CHEMBL603186","CHEMBL589809","CHEMBL600048","CHEMBL592427","CHEMBL592426","CHEMBL590962","CHEMBL589560","CHEMBL589561","CHEMBL589801","CHEMBL592200","CHEMBL592201","CHEMBL592224","CHEMBL592466","CHEMBL604042","CHEMBL604785","CHEMBL591288","CHEMBL592004","CHEMBL592247","CHEMBL589413","CHEMBL606027","CHEMBL591437","CHEMBL591440","CHEMBL589590","CHEMBL608860","CHEMBL589826","CHEMBL590559","CHEMBL590558","CHEMBL591040","CHEMBL591039","CHEMBL591038","CHEMBL592216","CHEMBL592215","CHEMBL592713","CHEMBL597950","CHEMBL597949","CHEMBL609321","CHEMBL597948","CHEMBL591213","CHEMBL599524","CHEMBL603968","CHEMBL599145","CHEMBL599728","CHEMBL598305","CHEMBL598306","CHEMBL598307","CHEMBL597096","CHEMBL591495","CHEMBL611681","CHEMBL597303","CHEMBL597304","CHEMBL597708","CHEMBL605337","CHEMBL597914","CHEMBL598520","CHEMBL601625","CHEMBL600381","CHEMBL592153","CHEMBL591897","CHEMBL606413","CHEMBL606403","CHEMBL597402","CHEMBL604914","CHEMBL597200","CHEMBL598007","CHEMBL599047","CHEMBL2021575","CHEMBL2021576","CHEMBL599863","CHEMBL603266","CHEMBL592617","CHEMBL602890","CHEMBL599388","CHEMBL589589","CHEMBL589588","CHEMBL601040","CHEMBL589825","CHEMBL592710","CHEMBL604672","CHEMBL592711","CHEMBL589830","CHEMBL589831","CHEMBL589832","CHEMBL602645","CHEMBL589119","CHEMBL589120","CHEMBL590083","CHEMBL589259","CHEMBL589503","CHEMBL589847","CHEMBL602728","CHEMBL597551","CHEMBL597752","CHEMBL596736","CHEMBL599398","CHEMBL598163","CHEMBL598164","CHEMBL598798","CHEMBL598799","CHEMBL604094","CHEMBL597569","CHEMBL597773","CHEMBL596754","CHEMBL596755","CHEMBL596957","CHEMBL596964","CHEMBL599218","CHEMBL605976","CHEMBL598406","CHEMBL598407","CHEMBL598610","CHEMBL598611","CHEMBL2374457","CHEMBL2374458","CHEMBL1087054","CHEMBL1087055","CHEMBL1088348","CHEMBL1084117","CHEMBL1077068","CHEMBL1077069","CHEMBL1077095","CHEMBL1077107","CHEMBL1077085","CHEMBL1080815","CHEMBL1087368","CHEMBL1081849","CHEMBL1082012","CHEMBL1080506","CHEMBL1080812","CHEMBL1080990","CHEMBL1080271","CHEMBL1080272","CHEMBL1079742","CHEMBL1092250","CHEMBL1089203","CHEMBL1089524","CHEMBL1092382","CHEMBL1090357","CHEMBL1090358","CHEMBL1090362","CHEMBL1090364","CHEMBL483108","CHEMBL1095445","CHEMBL1094808","CHEMBL1095776","CHEMBL1094784","CHEMBL1171792","CHEMBL1173324","CHEMBL1173191","CHEMBL1173192","CHEMBL1173193","CHEMBL1173262","CHEMBL1172855","CHEMBL1169870","CHEMBL1172823","CHEMBL1173601","CHEMBL1173602","CHEMBL1173665","CHEMBL1173666","CHEMBL1173667","CHEMBL1172915","CHEMBL1172916","CHEMBL1172917","CHEMBL1172980","CHEMBL1172573","CHEMBL1173688","CHEMBL1173794","CHEMBL1169856","CHEMBL1173454","CHEMBL1173815","CHEMBL1173814","CHEMBL1173813","CHEMBL1173457","CHEMBL1173456","CHEMBL1173455","CHEMBL1173251","CHEMBL1173250","CHEMBL1173249","CHEMBL1173248","CHEMBL1173816","CHEMBL1171822","CHEMBL1173680","CHEMBL1172418","CHEMBL1172419","CHEMBL1172602","CHEMBL1172603","CHEMBL1173022","CHEMBL1173023","CHEMBL1173319","CHEMBL1173397","CHEMBL1171638","CHEMBL1173398","CHEMBL1173105","CHEMBL1172781","CHEMBL1172773","CHEMBL1172843","CHEMBL1172802","CHEMBL1172803","CHEMBL1173651","CHEMBL1173652","CHEMBL1173653","CHEMBL1173713","CHEMBL1173714","CHEMBL1173718","CHEMBL1173783","CHEMBL1172877","CHEMBL1172878","CHEMBL1172947","CHEMBL1173789","CHEMBL1171273","CHEMBL1172950","CHEMBL1172951","CHEMBL1173014","CHEMBL1170278","CHEMBL1170459","CHEMBL1221700","CHEMBL1243346","CHEMBL1243283","CHEMBL1243254","CHEMBL1243255","CHEMBL1243345","CHEMBL1243284","CHEMBL1243316","CHEMBL1254363","CHEMBL1254364","CHEMBL1254443","CHEMBL1254523","CHEMBL1257998","CHEMBL1256432","CHEMBL1271950","CHEMBL1272006","CHEMBL1272061","CHEMBL1272113","CHEMBL1272167","CHEMBL1272168","CHEMBL1272222","CHEMBL1272223","CHEMBL1272275","CHEMBL1272276","CHEMBL1272324","CHEMBL1272325","CHEMBL1271507","CHEMBL1271561","CHEMBL1271562","CHEMBL1271618","CHEMBL1271619","CHEMBL1290072","CHEMBL1645474","CHEMBL1645473","CHEMBL1645466","CHEMBL1645470","CHEMBL1645472","CHEMBL1645467","CHEMBL1645471","CHEMBL1645475","CHEMBL1645477","CHEMBL1645469","CHEMBL1645465","CHEMBL1645464","CHEMBL1641991","CHEMBL1641990","CHEMBL1641989","CHEMBL1641998","CHEMBL1641997","CHEMBL1641996","CHEMBL1641995","CHEMBL1641994","CHEMBL1641993","CHEMBL1641992","CHEMBL1682557","CHEMBL1682558","CHEMBL1682559","CHEMBL1682560","CHEMBL1683949","CHEMBL1683950","CHEMBL1683951","CHEMBL1683952","CHEMBL1683954","CHEMBL1683955","CHEMBL1683956","CHEMBL1683957","CHEMBL1683958","CHEMBL1683959","CHEMBL1683960","CHEMBL1683961","CHEMBL1683962","CHEMBL1683963","CHEMBL1683964","CHEMBL1683965","CHEMBL1683966","CHEMBL1683967","CHEMBL1683968","CHEMBL1683969","CHEMBL1683970","CHEMBL1683971","CHEMBL1683972","CHEMBL1683973","CHEMBL1683974","CHEMBL1683975","CHEMBL1797418","CHEMBL109212","CHEMBL324045","CHEMBL109428","CHEMBL109503","CHEMBL83228","CHEMBL320479","CHEMBL111033","CHEMBL432396","CHEMBL325760","CHEMBL110036","CHEMBL110035","CHEMBL111520","CHEMBL111664","CHEMBL110577","CHEMBL109476","CHEMBL323970","CHEMBL111307","CHEMBL110945","CHEMBL419185","CHEMBL326445","CHEMBL114496","CHEMBL109355","CHEMBL323424","CHEMBL112096","CHEMBL109625","CHEMBL323900","CHEMBL109575","CHEMBL111688","CHEMBL112225","CHEMBL110055","CHEMBL113535","CHEMBL324399","CHEMBL111443","CHEMBL110065","CHEMBL109332","CHEMBL541988","CHEMBL114446","CHEMBL111586","CHEMBL111222","CHEMBL109515","CHEMBL110062","CHEMBL325981","CHEMBL324439","CHEMBL109259","CHEMBL441279","CHEMBL1797541","CHEMBL1812374","CHEMBL1812491","CHEMBL1812431","CHEMBL1812434","CHEMBL1812435","CHEMBL1812555","CHEMBL1812556","CHEMBL1812559","CHEMBL1812560","CHEMBL1812561","CHEMBL1812564","CHEMBL1812566","CHEMBL1812569","CHEMBL1812571","CHEMBL1812570","CHEMBL1812572","CHEMBL1812573","CHEMBL1817964","CHEMBL1817965","CHEMBL1821862","CHEMBL1821863","CHEMBL1821864","CHEMBL1821865","CHEMBL1821866","CHEMBL1821867","CHEMBL1821868","CHEMBL1821869","CHEMBL1821870","CHEMBL1821871","CHEMBL1821872","CHEMBL1821873","CHEMBL1821874","CHEMBL1821875","CHEMBL1821876","CHEMBL1821877","CHEMBL1821878","CHEMBL1821879","CHEMBL1821880","CHEMBL1821881","CHEMBL1821882","CHEMBL1821883","CHEMBL1821884","CHEMBL1821885","CHEMBL1821886","CHEMBL1821887","CHEMBL1821888","CHEMBL1821889","CHEMBL1821890","CHEMBL1821891","CHEMBL1821892","CHEMBL1821893","CHEMBL1821894","CHEMBL1821895","CHEMBL1821896","CHEMBL1821897","CHEMBL1822061","CHEMBL1822062","CHEMBL1822063","CHEMBL1822064","CHEMBL1822065","CHEMBL1822066","CHEMBL1830257","CHEMBL1830258","CHEMBL1830259","CHEMBL1830260","CHEMBL1830261","CHEMBL1830262","CHEMBL1830263","CHEMBL1830264","CHEMBL1830265","CHEMBL1830266","CHEMBL1830267","CHEMBL1830268","CHEMBL1830269","CHEMBL1830270","CHEMBL1830271","CHEMBL1830272","CHEMBL1830273","CHEMBL1830274","CHEMBL1830275","CHEMBL1830276","CHEMBL1830277","CHEMBL1830278","CHEMBL1830279","CHEMBL1830280","CHEMBL1828860","CHEMBL1828861","CHEMBL1828862","CHEMBL1828863","CHEMBL1828864","CHEMBL1828865","CHEMBL1828866","CHEMBL1828867","CHEMBL1828868","CHEMBL1828869","CHEMBL1828870","CHEMBL1828871","CHEMBL1828872","CHEMBL1828873","CHEMBL1828874","CHEMBL1828875","CHEMBL1828876","CHEMBL1828877","CHEMBL1828878","CHEMBL1828879","CHEMBL1828880","CHEMBL1828881","CHEMBL1828882","CHEMBL1828883","CHEMBL1828884","CHEMBL1829271","CHEMBL1829272","CHEMBL1829273","CHEMBL1829274","CHEMBL1829275","CHEMBL1614701","CHEMBL1200558","CHEMBL1016","CHEMBL296419","CHEMBL305660","CHEMBL808","CHEMBL64894","CHEMBL726","CHEMBL434063","CHEMBL334255","CHEMBL280998","CHEMBL7002","CHEMBL2221249","CHEMBL104","CHEMBL926","CHEMBL954","CHEMBL71","CHEMBL75880","CHEMBL307145","CHEMBL58","CHEMBL91","CHEMBL1221512","CHEMBL1009","CHEMBL459","CHEMBL1200679","CHEMBL479","CHEMBL83","CHEMBL588119","CHEMBL17157","CHEMBL1910268","CHEMBL1910273","CHEMBL1910275","CHEMBL1910278","CHEMBL1914653","CHEMBL1914654","CHEMBL1914655","CHEMBL1914656","CHEMBL1914657","CHEMBL1914658","CHEMBL1914659","CHEMBL1914660","CHEMBL1914661","CHEMBL1914461","CHEMBL1914662","CHEMBL1914663","CHEMBL1914664","CHEMBL1914665","CHEMBL1914666","CHEMBL1914667","CHEMBL105053","CHEMBL1914668","CHEMBL1914669","CHEMBL1914670","CHEMBL1914671","CHEMBL1914672","CHEMBL1914673","CHEMBL1914674","CHEMBL1916897","CHEMBL1928311","CHEMBL1928291","CHEMBL1928293","CHEMBL1928301","CHEMBL1928309","CHEMBL1928310","CHEMBL1928312","CHEMBL1928315","CHEMBL1928707","CHEMBL1928708","CHEMBL1928709","CHEMBL1928711","CHEMBL1928712","CHEMBL1928716","CHEMBL1928886","CHEMBL1928887","CHEMBL1928889","CHEMBL1928890","CHEMBL1929312","CHEMBL1929308","CHEMBL1929307","CHEMBL1929306","CHEMBL1929305","CHEMBL1929304","CHEMBL1440725","CHEMBL1929303","CHEMBL1929302","CHEMBL1929314","CHEMBL1928944","CHEMBL1928945","CHEMBL1928946","CHEMBL1928947","CHEMBL1928948","CHEMBL1928949","CHEMBL1928950","CHEMBL1928952","CHEMBL1928954","CHEMBL1928955","CHEMBL1928956","CHEMBL1928957","CHEMBL1928958","CHEMBL1928959","CHEMBL1934621","CHEMBL1934622","CHEMBL1934623","CHEMBL1934624","CHEMBL1934625","CHEMBL1934626","CHEMBL1934627","CHEMBL1934628","CHEMBL1934629","CHEMBL1933083","CHEMBL1934630","CHEMBL1934631","CHEMBL1934632","CHEMBL1934633","CHEMBL1946843","CHEMBL1947045","CHEMBL1947046","CHEMBL1944921","CHEMBL1944923","CHEMBL1944928","CHEMBL1944641","CHEMBL1944930","CHEMBL1944931","CHEMBL1916951","CHEMBL1916949","CHEMBL1945444","CHEMBL1945445","CHEMBL1945446","CHEMBL1945447","CHEMBL1945448","CHEMBL1945450","CHEMBL1945451","CHEMBL1945452","CHEMBL1945453","CHEMBL1945644","CHEMBL1945645","CHEMBL1945646","CHEMBL1945647","CHEMBL1945648","CHEMBL1945649","CHEMBL242541","CHEMBL1947122","CHEMBL1947123","CHEMBL1947125","CHEMBL1946926","CHEMBL1947124","CHEMBL1947126","CHEMBL1947127","CHEMBL1947121","CHEMBL1958019","CHEMBL1958020","CHEMBL1958021","CHEMBL1958022","CHEMBL1958023","CHEMBL1958024","CHEMBL1958025","CHEMBL1958026","CHEMBL1958027","CHEMBL1958028","CHEMBL1958029","CHEMBL1958030","CHEMBL1958031","CHEMBL1958032","CHEMBL1958033","CHEMBL1958034","CHEMBL1958035","CHEMBL1958036","CHEMBL1958037","CHEMBL1958038","CHEMBL1958039","CHEMBL1958209","CHEMBL1958210","CHEMBL1958211","CHEMBL1958212","CHEMBL1958213","CHEMBL1958214","CHEMBL1958215","CHEMBL1958216","CHEMBL1958217","CHEMBL1958218","CHEMBL1958219","CHEMBL1958220","CHEMBL1958221","CHEMBL1958222","CHEMBL1958223","CHEMBL1956892","CHEMBL1956886","CHEMBL2031297","CHEMBL2031298","CHEMBL2031299","CHEMBL2031300","CHEMBL2031301","CHEMBL2031302","CHEMBL2031303","CHEMBL2031304","CHEMBL2031305","CHEMBL2031306","CHEMBL2031307","CHEMBL2031308","CHEMBL2031309","CHEMBL2031310","CHEMBL2031311","CHEMBL2031312","CHEMBL2031313","CHEMBL1229592","CHEMBL2032376","CHEMBL2032377","CHEMBL2032378","CHEMBL2032379","CHEMBL2032380","CHEMBL2029425","CHEMBL2029426","CHEMBL2029427","CHEMBL2029428","CHEMBL2029429","CHEMBL2029430","CHEMBL2029431","CHEMBL2029432","CHEMBL2029434","CHEMBL2029435","CHEMBL2029436","CHEMBL2029437","CHEMBL2029438","CHEMBL2029439","CHEMBL2029440","CHEMBL2029441","CHEMBL2029443","CHEMBL2029689","CHEMBL2029690","CHEMBL2029691","CHEMBL2029692","CHEMBL2029693","CHEMBL2029694","CHEMBL2029695","CHEMBL2029696","CHEMBL2029697"]
drugz = ["CHEMBL522623","CHEMBL507827","CHEMBL454370","CHEMBL454371","CHEMBL453378","CHEMBL453379","CHEMBL510597","CHEMBL517127","CHEMBL461796","CHEMBL461797","CHEMBL460743","CHEMBL460721","CHEMBL460722","CHEMBL460723","CHEMBL460894","CHEMBL503755"]
drug_check_new(drugs)
